/*
Copyright (c) 2014, Joshua Horwitz
Copyright (c) 2012, Jason Sanford
All rights reserved.
*/
var GeoJSON=function(){var e=function(e,t){return this.parseJson(e,t)};return e.prototype.parseJson=function(e,t,n){t=t||{},n=e.properties||n||{};var o=[],r=this;switch(e.type){case"FeatureCollection":if(e.features)return _(e.features).each(function(e){o.push(r.createFeature(e.geometry,t,n))}),o;break;case"GeometryCollection":if(e.geometries)return _(e.geometries).each(function(e){o.push(r.createFeature(e,t,n))}),o;break;case"Feature":if(e.geometry)return r.createFeature(e.geometry,t,n);break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":if(e.coordinates)return r.createFeature(e,t,n)}return null},e.prototype.createFeature=function(e,t,n){switch(e.type){case"Point":return this.point(e,t,n);case"MultiPoint":return this.multiPoint(e,t,n);case"LineString":return this.lineString(e,t,n);case"MultiLineString":return this.multiLineString(e,t,n);case"Polygon":return this.polygon(e,t,n);case"MultiPolygon":return this.multiPolygon(e,t,n);case"GeometryCollection":return this.parseJson(e,t,n)}},e.prototype.point=function(e,t,n){var o;t=_(t).clone(),n=_(n).clone();var r=_(e.coordinates).isUndefined()?e:e.coordinates;t.position=new google.maps.LatLng(r[1],r[0]),n.style&&n.style.iconStyle&&(t.icon=n.style.iconStyle.url),o=new google.maps.Marker(t),o.properties=n,o.properties.type=n.type?n.type:"Point";var i=new google.maps.LatLngBounds;return i.extend(t.position),o.properties.bounds=i,o},e.prototype.multiPoint=function(e,t,n){var o=[],r=this;return _(e.coordinates).each(function(e){o.push(r.point(e,t,n))}),o},e.prototype.lineString=function(e,t,n){var o,r=[];t=_(t).clone(),n=_(n).clone();var i=_(e.coordinates).isUndefined()?e:e.coordinates,s=new google.maps.LatLngBounds;return _(i).each(function(e){var t=new google.maps.LatLng(e[1],e[0]);s.extend(t),r.push(t)}),t.path=r,o=new google.maps.Polyline(t),o.properties=n,o.properties.type=n.type?n.type:"LineString",o.properties.bounds=s,o},e.prototype.multiLineString=function(e,t,n){var o=[],r=this;return _(e.coordinates).each(function(e){o.push(r.lineString(e,t,n))}),o},e.prototype._clockwise=function(e){for(var t,n=0,o=0;e.length>o;o++)t=(o+1)%e.length,n+=e[o].lat()*e[t].lng(),n-=e[t].lat()*e[o].lng();n/=2;var r=n>0;return r},e.prototype.polygon=function(e,t,n){var o,r,i,s,a,p=[];t=_(t).clone(),n=_(n).clone();var c=new google.maps.LatLngBounds,u=_(e.coordinates).isUndefined()?e:e.coordinates,l=this;return _(u).each(function(e){o=[],_(e).each(function(e){var t=new google.maps.LatLng(e[1],e[0]);c.extend(t),o.push(t)}),r=p.length,0===r?(s=l._clockwise(o),p.push(o)):(1===r&&(a=l._clockwise(o)),p[r]=a===s?o.reverse():o)}),t.paths=p,i=new google.maps.Polygon(t),i.properties=n,i.properties.type=n.type?n.type:"Polygon",i.properties.bounds=c,i},e.prototype.multiPolygon=function(e,t,n){var o=[],r=this;return _(e.coordinates).each(function(e){o.push(r.polygon(e,t,n))}),o},e}();
