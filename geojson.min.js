/*
Copyright (c) 2012, Jason Sanford
All rights reserved.
*/
var GeoJSON=function(){var e=function(e,t){return this.parseJson(e,t)};e.prototype.parseJson=function(e,t,n){t=t||{};n=e.properties||n||{};var r=[];var i=this;switch(e.type){case"FeatureCollection":if(e.features){_(e.features).each(function(e){r.push(i.createFeature(e.geometry,t,n))});return r}break;case"GeometryCollection":if(e.geometries){_(e.geometries).each(function(e){r.push(i.createFeature(e,t,n))});return r}break;case"Feature":if(e.geometry){return i.createFeature(e.geometry,t,n)}break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":if(e.coordinates){return i.createFeature(e,t,n)}break}return null};e.prototype.createFeature=function(e,t,n){switch(e.type){case"Point":return this.point(e,t,n);case"MultiPoint":return this.multiPoint(e,t,n);case"LineString":return this.lineString(e,t,n);case"MultiLineString":return this.multiLineString(e,t,n);case"Polygon":return this.polygon(e,t,n);case"MultiPolygon":return this.multiPolygon(e,t,n);case"GeometryCollection":return this.parseJson(e,t,n)}};e.prototype.point=function(e,t,n){var r;t=_(t).clone();n=_(n).clone();var i=_(e.coordinates).isUndefined()?e:e.coordinates;t.position=new google.maps.LatLng(i[1],i[0]);if(n.style&&n.style.iconStyle){t.icon=n.style.iconStyle.url}r=new google.maps.Marker(t);r.properties=n;r.properties.type="Point";var s=new google.maps.LatLngBounds;s.extend(t.position);r.properties.bounds=s;return r};e.prototype.multiPoint=function(e,t,n){var r=[];t=_(t).clone();n=_(n).clone();var i=this;_(e.coordinates).each(function(e){r.push(i.point(e,t,n))});return r};e.prototype.lineString=function(e,t,n){var r=[],i;t=_(t).clone();n=_(n).clone();var s=_(e.coordinates).isUndefined()?e:e.coordinates;var o=new google.maps.LatLngBounds;_(s).each(function(e){var t=new google.maps.LatLng(e[1],e[0]);o.extend(t);r.push(t)});t.path=r;i=new google.maps.Polyline(t);i.properties=n;i.properties.type="LineString";i.properties.bounds=o;return i};e.prototype.multiLineString=function(e,t,n){var r=[],i;t=_(t).clone();n=_(n).clone();var s=this;_(e.coordinates).each(function(e){r.push(s.lineString(e,t,n))});return r};e.prototype._clockwise=function(e){var t=0,n;for(var r=0;r<e.length;r++){n=(r+1)%e.length;t+=e[r].lat()*e[n].lng();t-=e[n].lat()*e[r].lng()}t/=2;var i=t>0;return i};e.prototype.polygon=function(e,t,n){var r=[],i,s;var o;var u,a;t=_(t).clone();n=_(n).clone();var f=new google.maps.LatLngBounds;var l=_(e.coordinates).isUndefined()?e:e.coordinates;var c=this;_(l).each(function(e){i=[];_(e).each(function(e){var t=new google.maps.LatLng(e[1],e[0]);f.extend(t);i.push(t)});s=r.length;if(s===0){u=c._clockwise(i);r.push(i)}else{if(s===1){a=c._clockwise(i)}r[s]=a===u?i.reverse():i}});t.paths=r;o=new google.maps.Polygon(t);o.properties=n;o.properties.type="Polygon";o.properties.bounds=f;return o};e.prototype.multiPolygon=function(e,t,n){var r=[],i;t=_(t).clone();n=_(n).clone();var s=this;_(e.coordinates).each(function(e){r.push(s.polygon(e,t,n))});return r};return e}()